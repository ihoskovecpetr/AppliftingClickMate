(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{124:function(e,t){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),i=a(17),l=(a(93),a(31)),s=a(9),u=a(15),m=a.n(u),p=a(25);function d(e){return e.toLowerCase().split(" ").join("-")}function b(e){return f.apply(this,arguments)}function f(){return(f=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/data",{method:"GET",mode:"cors",cache:"default"});case 2:return a=e.sent,console.log("got all data ",a),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/newTeam",{method:"POST",mode:"cors",cache:"default",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:d(t),name:t})});case 2:return a=e.sent,console.log("create a new team ",a),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/singleTeam/".concat(t),{method:"POST",mode:"cors",cache:"default",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionStr:a})});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return T.apply(this,arguments)}function T(){return(T=Object(p.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/klik",{method:"POST",mode:"cors",cache:"default",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamId:t,sessionStr:a})});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=a(73),h=a.n(y),O=a(151),C=a(149),v=a(152),_=a(162),k=a(39),S=a(3);var A="my-app/project/SET_ACTIVE_TEAM",N={loading:!1,error:null,teams:[],mapTeamsById:{},activeTeamId:void 0,activeTeam:{},sessionString:"",newTeam:{loading:!1,error:null,finished:!1}};function I(){return function(e){return e(w()),b().then((function(e){return e.json()})).then((function(t){console.log("Json data: ",t),e(L(t))})).catch((function(t){return e(B(t))}))}}var w=function(){return{type:"my-app/project/FETCH_ALL_DATA_BEGIN"}},L=function(e){return{type:"my-app/project/FETCH_ALL_DATA_SUCCESS",payload:{teams:e,mapTeamsById:(t=e,t&&"object"==typeof t?t.reduce((function(e,t){return e[t._id]=t,e}),{}):{})}};var t},B=function(e){return{type:"my-app/project/FETCH_ALL_DATA_FAILURE",payload:{error:e}}},F=function(e,t){return console.log("Activating team start: ",t),{type:A,payload:{id:e,teamObj:t}}};function x(e){return function(t){return t(R()),function(e){return E.apply(this,arguments)}(e).then((function(e){return e.json()})).then((function(e){console.log("Json data: ",e),t(D()),t(F(e._id,e))})).catch((function(e){return t(U())}))}}var R=function(){return{type:"my-app/project/CREATE_NEW_TEAM_BEGIN"}},D=function(){return{type:"my-app/project/CREATE_NEW_TEAM_SUCCESS"}},U=function(){return{type:"my-app/project/CREATE_NEW_TEAM_FAILURE"}};function W(e,t){return function(a){return a(M()),function(e,t){return g.apply(this,arguments)}(e,t).then((function(e){return e.json()})).then((function(e){console.log("Json data: getTeamByUrlName",e),a(G(e)),a(F(e._id,e))})).catch((function(e){return a(P())}))}}var M=function(){return{type:"my-app/project/FETCH_SINGLE_TEAM_BEGIN"}},G=function(e){return{type:"my-app/project/FETCH_SINGLE_TEAM_SUCCESS"}},P=function(){return{type:"my-app/project/FETCH_SINGLE_TEAM_FAILURE"}},H="http://localhost:4005";H="https://degrassi-mountie-58419.herokuapp.com/",console.log("Production link: ",window.location);var z=h()(H),K=Object(i.b)((function(){return function(e,t){return{activeTeam:e.rootReducer.app_reducer.activeTeam}}}),(function(e,t){return{updateTeamByIdDisp:function(t){return e(function(e){return{type:"my-app/project/UPDATE_TEAM_CLICKS",payload:{teamObj:e}}}(t))}}}))((function(e){var t=J(),a=(e.activeTeam,e.updateTeamByIdDisp);return Object(n.useEffect)((function(){z.on("clicked",(function(e){console.log("Something SOCKET CLICKED",e),a(e)}))}),[]),n.createElement("div",{className:t.appWrap},n.createElement(C.a,{component:"h1",className:t.topLine},"STFUANDCLICK.COM"),n.createElement(O.a,{maxWidth:"sm",className:"mainContainer"},n.createElement(n.Fragment,null,e.children)))})),J=Object(v.a)((function(e){return Object(_.a)({appWrap:{width:"100%",minHeight:"100vh",backgroundColor:"#F1F2F3"},topLine:{backgroundColor:"#5194DF",width:"100%",color:"white",fontWeight:700,textAlign:"center"},mainContainer:{backgroundColor:"white"}})})),q=a(28),Y=a(5),V=a(156),Q=a(155),X=a(160),Z=a(161),$=a(157),ee=a(159),te=a(154),ae=a(158),ne=a(153),re=function(e){ce();var t=r.a.useState(!0),a=Object(q.a)(t,2),n=(a[0],a[1],e.position),c=e.groupName,o=e.groupClicks,i=(e.groupId,e.active),l=e.handleClickActivate;return r.a.createElement(oe,{key:c,onClick:l,style:{backgroundColor:i?"red":"rgba(81,148,223,0.23)"}},r.a.createElement(ie,{align:"center",style:{width:"10%"}},n,"."),r.a.createElement(ie,{align:"left"},c),r.a.createElement(ie,{align:"right"},o))},ce=Object(v.a)((function(e){return Object(_.a)({root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(4)}})})),oe=Object(Y.a)((function(e){return Object(_.a)({root:{"&:nth-of-type(odd)":{backgroundColor:"rgba(81,148,223,0.23)"}}})}))(ne.a),ie=Object(Y.a)((function(e){return Object(_.a)({head:{backgroundColor:"transparent",color:e.palette.common.white,paddingLeft:"0 !important",padding:5},body:{fontSize:14}})}))(te.a),le=Object(i.b)((function(){return function(e,t){return{activeTeam:e.rootReducer.app_reducer.activeTeam,sessionString:e.rootReducer.app_reducer.sessionString}}}),(function(e,t){return{dispatch:function(t){return e(t)},setActiveRowDisp:function(t,a){return e(F(t,a))},getTeamByUrlDisp:function(t,a){return e(W(t,a))}}}))((function(e){var t=Object(n.useState)(!1),a=Object(q.a)(t,2),r=a[0],c=a[1],o=e.position,i=e.groupName,l=e.groupUrlName,s=e.groupId,u=e.groupClicks,m=e.sessionString,p=e.activeTeam,d=e.setActiveRowDisp,b=e.getTeamByUrlDisp;Object(n.useEffect)((function(){p._id==s?c(!0):c(!1)}),[p]);return n.createElement(re,{position:o,groupName:i,groupClicks:u,groupId:s,active:r,handleClickActivate:function(){d(s,{name:i,urlName:l,totalClicks:u,sessionClicks:0,_id:s}),b(l,m)}})})),se=function(e){var t=ue(),a=(e.teams,e.mapTeamsById),n=e.handleClick,c=e.inputName,o=e.showAlert;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{container:!0,className:t.quoteGrid,justify:"center",alignItems:"center"},r.a.createElement(Q.a,{item:!0},r.a.createElement(C.a,{component:"p",className:t.quotedText},"'Its really simple, you just need to click as fast as you can'"),r.a.createElement(C.a,{component:"p",className:t.signatureText},"- anonymous"))),r.a.createElement("div",{className:t.listWrap},r.a.createElement(Q.a,{container:!0,alignItems:"stretch"},r.a.createElement(Q.a,{item:!0,xs:6,className:t.btnItem},r.a.createElement(C.a,{variant:"subtitle1",component:"p"},"Enter your team name:"),r.a.createElement(Z.a,{placeholder:"Your mom",inputRef:c,classes:{input:t.inputField}})),r.a.createElement(Q.a,{item:!0,xs:6,className:t.btnItem},r.a.createElement(V.a,{variant:"contained",fullWidth:!0,color:"primary",classes:{root:t.btnRoot,containedPrimary:t.btnPrimary,label:t.btnLabel},onClick:n},"Click"))),r.a.createElement(Q.a,{container:!0,justify:"center"},r.a.createElement(Q.a,{item:!0},o?r.a.createElement(pe,{severity:"error"},"You must fill up name first!"):null)),r.a.createElement($.a,{className:t.table,"aria-label":"customized table"},r.a.createElement(ae.a,null,r.a.createElement(ne.a,null,r.a.createElement(me,{align:"right",style:{width:"10%"}}),r.a.createElement(me,{align:"left"},"TEAM"),r.a.createElement(me,{align:"right"},"CLICKS"))),r.a.createElement(ee.a,null,a&&0!=Object.keys(a).length&&Object.keys(a).map((function(e,t){var n=a[e];return r.a.createElement(le,{key:e,position:t,groupName:n.name,groupUrlName:n.urlName,groupClicks:n.totalClicks,groupId:n._id})}))))))},ue=Object(v.a)((function(e){return Object(_.a)({quoteGrid:{minHeight:"6rem"},quotedText:{textAlign:"center"},signatureText:{textAlign:"right",paddingRight:60},listWrap:{width:"100%",backgroundColor:e.palette.background.paper,border:"3px solid #5194DF",borderRadius:5},table:{width:"100%"},inputField:{padding:6,fontSize:14},btnRoot:{height:"100%"},btnPrimary:{backgroundColor:"#5194DF"},btnLabel:{fontWeight:800,fontSize:"1.5rem"},btnItem:{padding:10,paddingBottom:0}})})),me=Object(Y.a)((function(e){return Object(_.a)({head:{backgroundColor:"transparent",color:"grey",fontWeight:700},body:{fontSize:14}})}))(te.a);function pe(e){return r.a.createElement(X.a,Object.assign({elevation:6,variant:"filled"},e))}var de=Object(i.b)((function(){return function(e,t){return console.log("State to propsss: ",e),{teams:e.rootReducer.app_reducer.teams,activeTeam:e.rootReducer.app_reducer.activeTeam,mapTeamsById:e.rootReducer.app_reducer.mapTeamsById}}}),(function(e,t){return{dispatch:function(t){return e(t)},getAllData:function(){return e(I())},createNewTeamDisp:function(t){return e(x(t))}}}))((function(e){var t=Object(s.f)(),a=Object(n.useState)(!1),r=Object(q.a)(a,2),c=r[0],o=r[1],i=Object(n.useRef)(null),l=e.teams,u=e.activeTeam,m=e.mapTeamsById,p=e.getAllData,d=e.createNewTeamDisp;Object(n.useEffect)((function(){console.log("UseEff appState: ",l),p()}),[]),Object(n.useEffect)((function(){console.log("UseEff appState: ",l),u&&u.urlName&&t.push("/".concat(u.urlName))}),[u]);return n.createElement(se,{teams:l,mapTeamsById:m,handleClick:function(){null!=i.current&&""!=i.current.value?(o(!1),console.log("inputName: ",i.current.value),d(i.current.value)):o(!0)},inputName:i,showAlert:c})})),be=function(e){var t=fe(),a=(Object(s.g)(),e.teams,e.activeTeamName),n=e.activeTeam,c=e.mapTeamsById,o=e.handleClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{container:!0,justify:"center",alignItems:"center",className:t.punchLine},r.a.createElement(Q.a,{item:!0},r.a.createElement(C.a,{variant:"h4",align:"center"},"Clicking for team ",r.a.createElement("b",null,a)))),r.a.createElement(Q.a,{container:!0,className:t.urlLineContainer},r.a.createElement(Q.a,{item:!0,xs:8},r.a.createElement(Q.a,{container:!0,justify:"center"},r.a.createElement(Q.a,{item:!0},r.a.createElement(C.a,{variant:"subtitle1",className:t.urlLine},"Too lazy to click? Let your pals click for you:")))),r.a.createElement(Q.a,{item:!0,xs:4},r.a.createElement(Q.a,{container:!0,justify:"flex-end"},r.a.createElement(Q.a,{item:!0},r.a.createElement(Z.a,{placeholder:"Your mom",value:window.location.href,className:t.wholeUrl,classes:{input:t.inputField}}))))),r.a.createElement("div",{className:t.listWrap},r.a.createElement(Q.a,{container:!0,alignItems:"stretch"},r.a.createElement(Q.a,{item:!0,xs:12,className:t.btnItem},r.a.createElement(V.a,{variant:"contained",fullWidth:!0,color:"primary",classes:{root:t.btnRoot,containedPrimary:t.btnPrimary,label:t.btnLabel},onClick:o},"Click"))),r.a.createElement(Q.a,{container:!0,className:t.counterContainer},r.a.createElement(Q.a,{item:!0,xs:6},r.a.createElement(C.a,{align:"center"},"Your Clicks:"),r.a.createElement(C.a,{align:"center",className:t.bigBlueText},n.sessionClicks)),r.a.createElement(Q.a,{item:!0,xs:6},r.a.createElement(C.a,{align:"center"},"Team Clicks:"),r.a.createElement(C.a,{align:"center",className:t.bigBlueText},n.totalClicks))),r.a.createElement($.a,{className:t.table,"aria-label":"customized table"},r.a.createElement(ae.a,null,r.a.createElement(ne.a,null,r.a.createElement(Ee,{align:"right",style:{width:"10%"}}),r.a.createElement(Ee,{align:"left"},"TEAM"),r.a.createElement(Ee,{align:"right"},"CLICKS"))),r.a.createElement(ee.a,null,c&&0!=Object.keys(c).length&&Object.keys(c).map((function(e,t){var a=c[e];return r.a.createElement(le,{key:e,position:t,groupName:a.name,groupUrlName:a.urlName,groupClicks:a.totalClicks,groupId:a._id})}))))))},fe=Object(v.a)((function(e){return Object(_.a)({punchLine:{minHeight:"6rem"},urlLineContainer:{marginBottom:15},urlLine:{width:"100%"},listWrap:{width:"100%",backgroundColor:e.palette.background.paper,border:"3px solid #5194DF",borderRadius:5},counterContainer:{marginTop:20,marginBottom:20},bigBlueText:{fontSize:30,fontWeight:700,color:"#5194DF"},table:{width:"100%"},wholeUrl:{marginLeft:5},inputField:{padding:6,fontSize:14,backgroundColor:"white"},btnRoot:{height:"100%"},btnPrimary:{backgroundColor:"#5194DF"},btnLabel:{fontWeight:800,fontSize:"1.5rem"},btnItem:{padding:10,paddingBottom:0}})})),Ee=Object(Y.a)((function(e){return Object(_.a)({head:{backgroundColor:"transparent",color:"grey",fontWeight:700},body:{fontSize:14}})}))(te.a),ge=Object(i.b)((function(){return function(e,t){return console.log("State to propsss: ",e),{teams:e.rootReducer.app_reducer.teams,activeTeam:e.rootReducer.app_reducer.activeTeam,sessionString:e.rootReducer.app_reducer.sessionString,mapTeamsById:e.rootReducer.app_reducer.mapTeamsById}}}),(function(e,t){return console.log("Team Dis to Props ownProps: ",t),{dispatch:function(t){return e(t)},getAllData:function(){return e(I())},getTeamByUrlDisp:function(t){return e(W(t))},createSessionDisp:function(){return e({type:"my-app/project/NEW_SESSION_STRING",payload:{str:(new Date).getTime().toString()+Math.random()}})}}}))((function(e){var t=Object(s.g)(),a=Object(s.f)(),r=e.teams,c=e.activeTeam,o=e.sessionString,i=e.mapTeamsById,l=e.getAllData,u=e.getTeamByUrlDisp,d=e.createSessionDisp;Object(n.useEffect)((function(){l(),d()}),[]),Object(n.useEffect)((function(){t.params.team&&c.urlName!=t.params.team&&u(t.params.team)}),[t]),Object(n.useEffect)((function(){console.log("activeTeam:  : ",c,c.name),c.urlName&&t.params.team!=c.urlName&&a.push("/".concat(c.urlName))}),[c]);var b=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(c._id,o);case 2:return t=e.sent,e.next=5,t.json();case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.createElement(be,{teams:r,activeTeamName:c.name,activeTeam:c,mapTeamsById:i,handleClick:b})})),je=function(e){return console.log("App Router location: ",e),Object(n.useEffect)((function(){b()}),[]),n.createElement(l.a,null,n.createElement(s.c,null,n.createElement(s.a,{exact:!0,path:"/"},n.createElement(K,e,n.createElement(de,null))),n.createElement(s.a,{exact:!0,path:"/:team"},n.createElement(K,e,n.createElement(ge,null)))))},Te=a(23),ye=Object(Te.c)({app_reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"my-app/project/FETCH_ALL_DATA_BEGIN":return Object(S.a)(Object(S.a)({},e),{},{loading:!0,error:null,teams:[]});case"my-app/project/FETCH_ALL_DATA_SUCCESS":return Object(S.a)(Object(S.a)({},e),{},{loading:!1,error:null,teams:t.payload.teams,mapTeamsById:t.payload.mapTeamsById});case"my-app/project/FETCH_ALL_DATA_FAILURE":return Object(S.a)(Object(S.a)({},e),{},{loading:!1,error:!0,teams:[]});case A:return console.log("Activating Team: ",t.payload.teamObj),Object(S.a)(Object(S.a)({},e),{},{activeTeamId:t.payload.id,activeTeam:t.payload.teamObj});case"my-app/project/UPD_ACTUAL_TEAM_CLICKS":return Object(S.a)(Object(S.a)({},e),{},{activeTeam:Object(S.a)(Object(S.a)({},e.activeTeam),{},{totalClicks:t.payload.totalClicks,sessionClicks:t.payload.sessionClicks})});case"my-app/project/UPD_ACTUAL_TEAM_TOTAL_CLICKS":return Object(S.a)(Object(S.a)({},e),{},{activeTeam:Object(S.a)(Object(S.a)({},e.activeTeam),{},{totalClicks:t.payload.totalClicks})});case"my-app/project/UPDATE_TEAM_CLICKS":var a=e.activeTeam.totalClicks?e.activeTeam.totalClicks:0,n=e.activeTeam.sessionClicks?e.activeTeam.sessionClicks:0;return e.activeTeam._id===t.payload.teamObj.teamId&&(a=t.payload.teamObj.totalClicks),e.sessionString===t.payload.teamObj.sessionString&&(n=t.payload.teamObj.clicks),Object(S.a)(Object(S.a)({},e),{},{activeTeam:Object(S.a)(Object(S.a)({},e.activeTeam),{},{totalClicks:a,sessionClicks:n}),mapTeamsById:Object(S.a)(Object(S.a)({},e.mapTeamsById),{},Object(k.a)({},t.payload.teamObj.teamId,Object(S.a)(Object(S.a)({},e.mapTeamsById[t.payload.teamObj.teamId]),{},{totalClicks:t.payload.teamObj.totalClicks})))});case"my-app/project/NEW_SESSION_STRING":return Object(S.a)(Object(S.a)({},e),{},{sessionString:t.payload.str});case"my-app/project/CREATE_NEW_TEAM_BEGIN":return Object(S.a)(Object(S.a)({},e),{},{newTeam:Object(S.a)(Object(S.a)({},e.newTeam),{},{loading:!0})});case"my-app/project/CREATE_NEW_TEAM_SUCCESS":return Object(S.a)(Object(S.a)({},e),{},{newTeam:Object(S.a)(Object(S.a)({},e.newTeam),{},{loading:!1,finished:!0})});case"my-app/project/CREATE_NEW_TEAM_FAILURE":return Object(S.a)(Object(S.a)({},e),{},{newTeam:Object(S.a)(Object(S.a)({},e.newTeam),{},{loading:!1,error:["Fail while creating new Team"]})});case"my-app/project/FETCH_SINGLE_TEAM_BEGIN":return Object(S.a)(Object(S.a)({},e),{},{activeTeam:Object(S.a)(Object(S.a)({},e.activeTeam),{},{loading:!0})});case"my-app/project/FETCH_SINGLE_TEAM_SUCCESS":return console.log("Fetched one team: ",t.payload),Object(S.a)(Object(S.a)({},e),{},{activeTeam:Object(S.a)(Object(S.a)({},e.activeTeam),{},{loading:!1})});case"my-app/project/FETCH_SINGLE_TEAM_FAILURE":return Object(S.a)(Object(S.a)({},e),{},{activeTeam:Object(S.a)(Object(S.a)({},e.activeTeam),{},{error:["Fail while loading this Team"]})});default:return e}}}),he=a(74),Oe=function(e){return function(t){return function(a){console.group(a.type),console.info("dispatching",a);var n=t(a);return console.log("next state",e.getState()),console.groupEnd(),n}}},Ce=Object(Te.c)({rootReducer:ye}),ve=Object(Te.d)(Ce,Object(Te.a)(he.a,Oe));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:ve},r.a.createElement(je,null))),document.getElementById("root"))},84:function(e,t,a){e.exports=a(128)},93:function(e,t,a){}},[[84,1,2]]]);
//# sourceMappingURL=main.23c03f87.chunk.js.map